<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Rack::Cache::Response [Rack::Cache API Documentation]</title>
    <meta content='text/html; charset=utf8' http-equiv='Content-Type'>
    <link href='../../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Class</span>
          Rack::Cache::Response
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../../files/lib/rack/cache/response_rb.html">lib/rack/cache/response.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong>Object</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            Provides access to the response generated by the downstream application.
            The <tt>response</tt>, <tt>original_response</tt>, and <tt>entry</tt>
            objects exposed by the Core caching engine are instances of this class.
            </p>
            <p>
            <a href="Response.html">Response</a> objects respond to a variety of
            convenience methods, including those defined in Rack::Response::Helpers,
            Rack::Cache::Headers, and Rack::Cache::ResponseHeaders.
            </p>
            <p>
            Note that <a href="Response.html">Rack::Cache::Response</a> is not a
            subclass of Rack::Response and does not perform many of the same
            initialization and finalization tasks. For example, the body is not slurped
            during initialization and there are no facilities for generating response
            output.
            </p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public class</h3>
            <ol>
              <li><a href="#M000031">new</a></li>
            </ol>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000043">age</a></li>
              <li><a href="#M000034">cache_control</a></li>
              <li><a href="#M000035">cache_control=</a></li>
              <li><a href="#M000037">cacheable?</a></li>
              <li><a href="#M000050">client_ttl=</a></li>
              <li><a href="#M000042">date</a></li>
              <li><a href="#M000052">etag</a></li>
              <li><a href="#M000041">expire!</a></li>
              <li><a href="#M000045">expires</a></li>
              <li><a href="#M000036">fresh?</a></li>
              <li><a href="#M000032">initialize_copy</a></li>
              <li><a href="#M000051">last_modified</a></li>
              <li><a href="#M000044">max_age</a></li>
              <li><a href="#M000046">max_age=</a></li>
              <li><a href="#M000040">must_revalidate?</a></li>
              <li><a href="#M000053">not_modified!</a></li>
              <li><a href="#M000039">private=</a></li>
              <li><a href="#M000047">shared_max_age=</a></li>
              <li><a href="#M000033">to_a</a></li>
              <li><a href="#M000048">ttl</a></li>
              <li><a href="#M000049">ttl=</a></li>
              <li><a href="#M000038">validateable?</a></li>
              <li><a href="#M000054">vary</a></li>
              <li><a href="#M000055">vary?</a></li>
              <li><a href="#M000056">vary_header_names</a></li>
            </ol>
          </div>
          <div id='context'>
            <div id='includes'>
              <h2>Included modules</h2>
              <ol>
                <li>Rack::Response::Helpers</li>
              </ol>
            </div>
          </div>
          <div id='section'>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>CACHEABLE_RESPONSE_CODES</td>
                    <td>=</td>
                    <td class='context-item-value'>[       200, # OK       203, # Non-Authoritative Information       300, # Multiple Choices       301, # Moved Permanently       302, # Found       404, # Not Found       410  # Gone     ].to_set</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      Status codes of responses that MAY be stored by a cache or used in reply to
                      a subsequent request.
                      
                      <p>
                      <a
                      href="http://tools.ietf.org/html/rfc2616#section-13.4">tools.ietf.org/html/rfc2616#section-13.4</a>
                      </p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>NOT_MODIFIED_OMIT_HEADERS</td>
                    <td>=</td>
                    <td class='context-item-value'>%w[       Allow       Content-Encoding       Content-Language       Content-Length       Content-MD5       Content-Type       Last-Modified     ].to_set</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      Headers that MUST NOT be included with 304 Not Modified responses.
                      
                      <p>
                      <a
                      href="http://tools.ietf.org/html/rfc2616#section-10.3.5">tools.ietf.org/html/rfc2616#section-10.3.5</a>
                      </p>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>body</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'>
                      
                      <a href="../../Rack.html">Rack</a> response tuple accessors.
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>headers</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'>
                      
                      <a href="../../Rack.html">Rack</a> response tuple accessors.
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>now</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      The time when the <a href="Response.html">Response</a> object was
                      instantiated.
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>status</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'>
                      
                      <a href="../../Rack.html">Rack</a> response tuple accessors.
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public class methods</h2>
              <div class='method public-class' id='method-M000031'>
                <a name='M000031'></a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(status, headers, body)</span>
                </div>
                <div class='description'>
                  <p>
                  Create a <a href="Response.html">Response</a> instance given the response
                  status code, header hash, and body.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000031-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000031-source'>    <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 32</span>&#x000A;32:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">status</span>, <span class="ruby-identifier">headers</span>, <span class="ruby-identifier">body</span>)&#x000A;33:       <span class="ruby-ivar">@status</span> = <span class="ruby-identifier">status</span>.<span class="ruby-identifier">to_i</span>&#x000A;34:       <span class="ruby-ivar">@headers</span> = <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">HeaderHash</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">headers</span>)&#x000A;35:       <span class="ruby-ivar">@body</span> = <span class="ruby-identifier">body</span>&#x000A;36:       <span class="ruby-ivar">@now</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>&#x000A;37:       <span class="ruby-ivar">@headers</span>[<span class="ruby-value str">'Date'</span>] <span class="ruby-operator">||=</span> <span class="ruby-ivar">@now</span>.<span class="ruby-identifier">httpdate</span>&#x000A;38:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000043'>
                <a name='M000043'></a>
                <div class='synopsis'>
                  <span class='name'>age</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  The age of the response.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000043-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000043-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 148</span>&#x000A;148:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">age</span>&#x000A;149:       (<span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Age'</span>] <span class="ruby-operator">||</span>  [(<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">date</span>).<span class="ruby-identifier">to_i</span>, <span class="ruby-value">0</span>].<span class="ruby-identifier">max</span>).<span class="ruby-identifier">to_i</span>&#x000A;150:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000034'>
                <a name='M000034'></a>
                <div class='synopsis'>
                  <span class='name'>cache_control</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  A Hash of name=value pairs that correspond to the Cache-Control header.
                  Valueless parameters (e.g., must-revalidate, no-store) have a Hash value of
                  true. This method always returns a Hash, empty if no Cache-Control header
                  is present.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000034-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000034-source'>    <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 68</span>&#x000A;68:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cache_control</span>&#x000A;69:       <span class="ruby-ivar">@cache_control</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">CacheControl</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Cache-Control'</span>])&#x000A;70:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000035'>
                <a name='M000035'></a>
                <div class='synopsis'>
                  <span class='name'>cache_control=</span>
                  <span class='arguments'>(value)</span>
                </div>
                <div class='description'>
                  <p>
                  Set the Cache-Control header to the values specified by the Hash. See the
                  <a href="Response.html#M000034">cache_control</a> method for information on
                  expected Hash structure.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000035-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000035-source'>    <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 74</span>&#x000A;74:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cache_control=</span>(<span class="ruby-identifier">value</span>)&#x000A;75:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-identifier">:to_hash</span>&#x000A;76:         <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">clear</span>&#x000A;77:         <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">value</span>)&#x000A;78:         <span class="ruby-identifier">value</span> = <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">to_s</span>&#x000A;79:       <span class="ruby-keyword kw">end</span>&#x000A;80: &#x000A;81:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">empty?</span>&#x000A;82:         <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'Cache-Control'</span>)&#x000A;83:       <span class="ruby-keyword kw">else</span>&#x000A;84:         <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Cache-Control'</span>] = <span class="ruby-identifier">value</span>&#x000A;85:       <span class="ruby-keyword kw">end</span>&#x000A;86:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000037'>
                <a name='M000037'></a>
                <div class='synopsis'>
                  <span class='name'>cacheable?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Determine if the response is worth caching under any circumstance.
                  Responses marked &#8220;private&#8221; with an explicit Cache-Control
                  directive are considered uncacheable
                  </p>
                  <p>
                  Responses with neither a freshness lifetime (Expires, max-age) nor cache
                  validator (Last-Modified, ETag) are considered uncacheable.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000037-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000037-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 102</span>&#x000A;102:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cacheable?</span>&#x000A;103:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">CACHEABLE_RESPONSE_CODES</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">status</span>)&#x000A;104:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">no_store?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">private?</span>&#x000A;105:       <span class="ruby-identifier">validateable?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">fresh?</span>&#x000A;106:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000050'>
                <a name='M000050'></a>
                <div class='synopsis'>
                  <span class='name'>client_ttl=</span>
                  <span class='arguments'>(seconds)</span>
                </div>
                <div class='description'>
                  <p>
                  Set the response&#8217;s time-to-live for private/client caches. This
                  adjusts the Cache-Control/max-age directive.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000050-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000050-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 196</span>&#x000A;196:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">client_ttl=</span>(<span class="ruby-identifier">seconds</span>)&#x000A;197:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">max_age</span> = <span class="ruby-identifier">age</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">seconds</span>&#x000A;198:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000042'>
                <a name='M000042'></a>
                <div class='synopsis'>
                  <span class='name'>date</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  The date, as specified by the Date header. When no Date header is present,
                  set the Date header to Time.now and return.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000042-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000042-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 138</span>&#x000A;138:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">date</span>&#x000A;139:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date</span> = <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Date'</span>]&#x000A;140:         <span class="ruby-constant">Time</span>.<span class="ruby-identifier">httpdate</span>(<span class="ruby-identifier">date</span>)&#x000A;141:       <span class="ruby-keyword kw">else</span>&#x000A;142:         <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Date'</span>] = <span class="ruby-identifier">now</span>.<span class="ruby-identifier">httpdate</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">frozen?</span>&#x000A;143:         <span class="ruby-identifier">now</span>&#x000A;144:       <span class="ruby-keyword kw">end</span>&#x000A;145:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000052'>
                <a name='M000052'></a>
                <div class='synopsis'>
                  <span class='name'>etag</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  The literal value of ETag HTTP header or nil if no ETag is specified.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000052-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000052-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 207</span>&#x000A;207:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">etag</span>&#x000A;208:       <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'ETag'</span>]&#x000A;209:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000041'>
                <a name='M000041'></a>
                <div class='synopsis'>
                  <span class='name'>expire!</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Mark the response stale by setting the Age header to be equal to the
                  maximum age of the response.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000041-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000041-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 132</span>&#x000A;132:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expire!</span>&#x000A;133:       <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Age'</span>] = <span class="ruby-identifier">max_age</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fresh?</span>&#x000A;134:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000045'>
                <a name='M000045'></a>
                <div class='synopsis'>
                  <span class='name'>expires</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  The value of the Expires header as a Time object.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000045-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000045-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 164</span>&#x000A;164:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expires</span>&#x000A;165:       <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Expires'</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">httpdate</span>(<span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Expires'</span>])&#x000A;166:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000036'>
                <a name='M000036'></a>
                <div class='synopsis'>
                  <span class='name'>fresh?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Determine if the response is &#8220;fresh&#8221;. Fresh responses may be
                  served from cache without any interaction with the origin. A response is
                  considered fresh when it includes a Cache-Control/max-age indicator or
                  Expiration header and the calculated age is less than the freshness
                  lifetime.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000036-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000036-source'>    <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 92</span>&#x000A;92:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fresh?</span>&#x000A;93:       <span class="ruby-identifier">ttl</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ttl</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>&#x000A;94:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000032'>
                <a name='M000032'></a>
                <div class='synopsis'>
                  <span class='name'>initialize_copy</span>
                  <span class='arguments'>(other)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000032-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000032-source'>    <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 40</span>&#x000A;40:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize_copy</span>(<span class="ruby-identifier">other</span>)&#x000A;41:       <span class="ruby-keyword kw">super</span>&#x000A;42:       <span class="ruby-ivar">@headers</span> = <span class="ruby-identifier">other</span>.<span class="ruby-identifier">headers</span>.<span class="ruby-identifier">dup</span>&#x000A;43:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000051'>
                <a name='M000051'></a>
                <div class='synopsis'>
                  <span class='name'>last_modified</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  The String value of the Last-Modified header exactly as it appears in the
                  response (i.e., no date parsing / conversion is performed).
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000051-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000051-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 202</span>&#x000A;202:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">last_modified</span>&#x000A;203:       <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Last-Modified'</span>]&#x000A;204:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000044'>
                <a name='M000044'></a>
                <div class='synopsis'>
                  <span class='name'>max_age</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  The number of seconds after the time specified in the response&#8217;s Date
                  header when the the response should no longer be considered fresh. First
                  check for a s-maxage directive, then a max-age directive, and then fall
                  back on an expires header; return nil when no maximum age can be
                  established.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000044-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000044-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 157</span>&#x000A;157:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">max_age</span>&#x000A;158:       <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">shared_max_age</span> <span class="ruby-operator">||</span>&#x000A;159:         <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">max_age</span> <span class="ruby-operator">||</span>&#x000A;160:         (<span class="ruby-identifier">expires</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">expires</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">date</span>))&#x000A;161:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000046'>
                <a name='M000046'></a>
                <div class='synopsis'>
                  <span class='name'>max_age=</span>
                  <span class='arguments'>(value)</span>
                </div>
                <div class='description'>
                  <p>
                  The number of seconds after which the response should no longer be
                  considered fresh. Sets the Cache-Control max-age directive.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000046-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000046-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 170</span>&#x000A;170:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">max_age=</span>(<span class="ruby-identifier">value</span>)&#x000A;171:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">cache_control</span> = <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value str">'max-age'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>)&#x000A;172:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000040'>
                <a name='M000040'></a>
                <div class='synopsis'>
                  <span class='name'>must_revalidate?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Indicates that the cache must not serve a stale response in any
                  circumstance without first revalidating with the origin. When present, the
                  TTL of the response should not be overriden to be greater than the value
                  provided by the origin.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000040-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000040-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 126</span>&#x000A;126:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">must_revalidate?</span>&#x000A;127:       <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">must_revalidate</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">proxy_revalidate</span>&#x000A;128:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000053'>
                <a name='M000053'></a>
                <div class='synopsis'>
                  <span class='name'>not_modified!</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Modify the response so that it conforms to the rules defined for &#8216;304
                  Not Modified&#8217;. This sets the status, removes the body, and discards
                  any headers that MUST NOT be included in 304 responses.
                  </p>
                  <p>
                  <a
                  href="http://tools.ietf.org/html/rfc2616#section-10.3.5">tools.ietf.org/html/rfc2616#section-10.3.5</a>
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000053-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000053-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 229</span>&#x000A;229:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">not_modified!</span>&#x000A;230:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">status</span> = <span class="ruby-value">304</span>&#x000A;231:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">body</span> = []&#x000A;232:       <span class="ruby-constant">NOT_MODIFIED_OMIT_HEADERS</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">name</span>) }&#x000A;233:       <span class="ruby-keyword kw">nil</span>&#x000A;234:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000039'>
                <a name='M000039'></a>
                <div class='synopsis'>
                  <span class='name'>private=</span>
                  <span class='arguments'>(value)</span>
                </div>
                <div class='description'>
                  <p>
                  Mark the response &#8220;private&#8221;, making it ineligible for serving
                  other clients.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000039-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000039-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 116</span>&#x000A;116:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">private=</span>(<span class="ruby-identifier">value</span>)&#x000A;117:       <span class="ruby-identifier">value</span> = <span class="ruby-identifier">value</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>&#x000A;118:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">cache_control</span> = <span class="ruby-identifier">cache_control</span>.&#x000A;119:         <span class="ruby-identifier">merge</span>(<span class="ruby-value str">'public'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>, <span class="ruby-value str">'private'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>)&#x000A;120:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000047'>
                <a name='M000047'></a>
                <div class='synopsis'>
                  <span class='name'>shared_max_age=</span>
                  <span class='arguments'>(value)</span>
                </div>
                <div class='description'>
                  <p>
                  Like <a href="Response.html#M000046">max_age=</a> but sets the s-maxage
                  directive, which applies only to shared caches.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000047-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000047-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 176</span>&#x000A;176:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">shared_max_age=</span>(<span class="ruby-identifier">value</span>)&#x000A;177:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">cache_control</span> = <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value str">'s-maxage'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>)&#x000A;178:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000033'>
                <a name='M000033'></a>
                <div class='synopsis'>
                  <span class='name'>to_a</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Return the status, headers, and body in a three-tuple.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000033-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000033-source'>    <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 46</span>&#x000A;46:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_a</span>&#x000A;47:       [<span class="ruby-identifier">status</span>, <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">to_hash</span>, <span class="ruby-identifier">body</span>]&#x000A;48:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000048'>
                <a name='M000048'></a>
                <div class='synopsis'>
                  <span class='name'>ttl</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  The response&#8217;s time-to-live in seconds, or nil when no freshness
                  information is present in the response. When the responses <a
                  href="Response.html#M000048">ttl</a> is <= 0, the response may not be
                  served from cache without first revalidating with the origin.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000048-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000048-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 184</span>&#x000A;184:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ttl</span>&#x000A;185:       <span class="ruby-identifier">max_age</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">age</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">max_age</span>&#x000A;186:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000049'>
                <a name='M000049'></a>
                <div class='synopsis'>
                  <span class='name'>ttl=</span>
                  <span class='arguments'>(seconds)</span>
                </div>
                <div class='description'>
                  <p>
                  Set the response&#8217;s time-to-live for shared caches to the specified
                  number of seconds. This adjusts the Cache-Control/s-maxage directive.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000049-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000049-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 190</span>&#x000A;190:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ttl=</span>(<span class="ruby-identifier">seconds</span>)&#x000A;191:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">shared_max_age</span> = <span class="ruby-identifier">age</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">seconds</span>&#x000A;192:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000038'>
                <a name='M000038'></a>
                <div class='synopsis'>
                  <span class='name'>validateable?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Determine if the response includes headers that can be used to validate the
                  response with the origin using a conditional GET request.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000038-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000038-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 110</span>&#x000A;110:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validateable?</span>&#x000A;111:       <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value str">'Last-Modified'</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value str">'ETag'</span>)&#x000A;112:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000054'>
                <a name='M000054'></a>
                <div class='synopsis'>
                  <span class='name'>vary</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  The literal value of the Vary header, or nil when no header is present.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000054-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000054-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 237</span>&#x000A;237:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">vary</span>&#x000A;238:       <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Vary'</span>]&#x000A;239:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000055'>
                <a name='M000055'></a>
                <div class='synopsis'>
                  <span class='name'>vary?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Does the response include a Vary header?
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000055-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000055-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 242</span>&#x000A;242:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">vary?</span>&#x000A;243:       <span class="ruby-operator">!</span> <span class="ruby-identifier">vary</span>.<span class="ruby-identifier">nil?</span>&#x000A;244:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000056'>
                <a name='M000056'></a>
                <div class='synopsis'>
                  <span class='name'>vary_header_names</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  An array of header names given in the Vary header or an empty array when no
                  Vary header is present.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000056-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000056-source'>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 248</span>&#x000A;248:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">vary_header_names</span>&#x000A;249:       <span class="ruby-keyword kw">return</span> [] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">vary</span> = <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Vary'</span>]&#x000A;250:       <span class="ruby-identifier">vary</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/[\s,]+/</span>)&#x000A;251:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
